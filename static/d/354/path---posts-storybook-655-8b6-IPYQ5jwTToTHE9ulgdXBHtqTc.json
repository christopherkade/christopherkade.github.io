{"data":{"markdownRemark":{"id":"2ee81f84-e9b2-5964-8859-0f3db99bdbb8","html":"<p><a href=\"https://storybook.js.org/\">Storybook</a> is a great tool, it allows you to organize your components into a neat little interface that looks something like <a href=\"https://christopherkade.com/ReactCraft\">this</a>.<br>\nYou basically create <em>stories</em> that take care of returning the component you want to display to your user.</p>\n<p>Here‚Äôs an example of a story for a React component:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//...</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Button <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/Button\"</span>\n\n<span class=\"token function\">storiesOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Button'</span><span class=\"token punctuation\">,</span> module<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'With text'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Enter World</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'With emojis'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">üî•‚öîÔ∏è</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Pretty simple stuff, of course, there are many ways of <a href=\"https://storybook.js.org/docs/configurations/options-parameter/\">customizing</a> your Storybook, from its theme to adding awesome <a href=\"https://storybook.js.org/docs/addons/addon-gallery/\">addons</a>.</p>\n<p>But this article is not an introduction to Storybook, if you want one I truly recommend Emma Wedekind‚Äôs <a href=\"https://dev.to/emmawedekind/documenting-react-components-with-storybook-4h3b\">‚ÄúDocumenting React Components With Storybook‚Äù</a>. Today, we‚Äôll deploy an existing Storybook to Github Pages like <a href=\"https://christopherkade.com/ReactCraft\">this one</a> while automating the process at each push on a given branch.</p>\n<p><br><br></p>\n<h2 id=\"setting-up-travis-ci\"><a href=\"#setting-up-travis-ci\" aria-label=\"setting up travis ci permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up Travis CI</h2>\n<p>Travis CI is a continuous integration service that‚Äôs used to build and test your software hosted on Github. It‚Äôs free for open-source projects and will allow us to deploy to Github Pages super easily.</p>\n<p>There are a few steps to follow before we can do all of that:</p>\n<ol>\n<li>Go to <a href=\"http://travis-ci.com\">travis-ci.com</a> and Sign up with GitHub.</li>\n<li>Accept the Authorization of Travis CI. You‚Äôll be redirected to GitHub.</li>\n<li>Click the green Activate button, and select the repository you want to deploy</li>\n<li>Generate a personal access token on Github following the short instructions on this <a href=\"https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line\">link</a> and give it the <code class=\"language-text\">public_repo</code> permissions.</li>\n<li>Go to your project‚Äôs settings on Travis, in the environment variables section, create a <code class=\"language-text\">GITHUB_TOKEN</code> variable and give it the token you‚Äôve just generated. This token will allow Travis to push to your repository in order to deploy.</li>\n</ol>\n<div style=\"display: flex; align-items: center; justify-content: center\">\n<img width=\"70%\" alt=\"render of the component mentioned\" src=\"https://user-images.githubusercontent.com/15229355/57936079-78135700-78c3-11e9-8735-0aac4881d546.png\">\n</div>\n<p>We can now create a <code class=\"language-text\">.travis.yml</code> file at the root of our project and give it the following content:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\"># Tells Travis we're running on a Node environment</span>\n<span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'node_js'</span>\n<span class=\"token key atrule\">node_js</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'8'</span>\n\n<span class=\"token comment\"># Script that is run before the script phase</span>\n<span class=\"token key atrule\">before_script</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> yarn build<span class=\"token punctuation\">-</span>storybook\n\n<span class=\"token comment\"># Deployment information</span>\n<span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> pages <span class=\"token comment\"># Tell Travis we want to deploy to Github Pages</span>\n  <span class=\"token key atrule\">skip-cleanup</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true </span>\n  <span class=\"token key atrule\">github-token</span><span class=\"token punctuation\">:</span> $GITHUB_TOKEN <span class=\"token comment\"># Will take the environment variable you created on step 5</span>\n  <span class=\"token key atrule\">local_dir</span><span class=\"token punctuation\">:</span> storybook<span class=\"token punctuation\">-</span>static <span class=\"token comment\"># The folder that needs to be deployed</span>\n  <span class=\"token key atrule\">repo</span><span class=\"token punctuation\">:</span> christopherkade/ReactCraft <span class=\"token comment\"># Add your username/project_name here</span>\n  <span class=\"token key atrule\">target_branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages <span class=\"token comment\"># Tell Travis to deploy on the gh-pages branch</span>\n  <span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> master <span class=\"token comment\"># Tell Travis to trigger a deploy only when we push to master</span></code></pre></div>\n<blockquote>\n<p>Note: If you wish to trigger the deployment when pushing to a specific branch, feel free to change the <code class=\"language-text\">branch: master</code> section of the configuration file.  </p>\n</blockquote>\n<p><br><br></p>\n<h2 id=\"setting-up-our-storybook-for-deployment\"><a href=\"#setting-up-our-storybook-for-deployment\" aria-label=\"setting up our storybook for deployment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up our Storybook for deployment</h2>\n<p>We‚Äôre almost done, we now need to export our Storybook into a static app. This way Travis will take care of pushing the generated app to our <code class=\"language-text\">gh-pages</code> branch, which will deploy it !</p>\n<p>In your <code class=\"language-text\">package.json</code>, add the following script:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token property\">\"build-storybook\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"build-storybook -s public\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This script is the one run during our <code class=\"language-text\">before_script</code> phase in our <code class=\"language-text\">.travis.yml</code>. It will generate a <code class=\"language-text\">storybook-static</code> folder at the root of your project containing your website‚Äôs static instance.</p>\n<p><br><br></p>\n<h2 id=\"deploying-your-storybook\"><a href=\"#deploying-your-storybook\" aria-label=\"deploying your storybook permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploying your Storybook</h2>\n<p>We can now trigger our first deployment üòç</p>\n<p>Push your <code class=\"language-text\">package.json</code> and <code class=\"language-text\">.travis.yml</code> files to your repository.<br>\nIf everything goes according to plan you should see a build being triggered on your Travis dashboard. After a short while (give it a few minutes at first), if your build is shown as successful, you‚Äôll find your Storybook under the following URL: username.github.io/project-name.</p>\n<p>Keep in mind that a few things might make a build fail:  </p>\n<ol>\n<li>Your tests failing</li>\n<li>Forgetting a step in this article, for example setting up the environment variable containing your Github token on your Travis project.</li>\n<li>Your linter throwing an error (if you have one set up)</li>\n</ol>\n<p>So you can always fix these issues and push your changes to Github.</p>\n<br>\n<p>Congratulations on deploying your Storybook to Github Pages üéâ</p>\n<p>If you have any questions or want to keep in touch, please feel free to follow me on Twitter <a href=\"https://twitter.com/christo_kade\">@christo_kade</a>, I regularly post about JS and CSS there and will always inform you when new articles are out üòÑ</p>","fields":{"slug":"/posts/storybook","tagSlugs":["/tag/tutorial/"]},"frontmatter":{"date":"2019-05-17","description":"Deploy your Storybooks to Github Pages using Travis CI in a matter of minutes.","tags":["Tutorial"],"title":"Automatically deploying your Storybook to Github Pages"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/storybook"}}