{"pageProps":{"frontmatter":{"title":"Introduction to React Hooks","description":"From class to functional components.","date":"2019-05-04","slug":"/posts/react-hooks","isPublished":true},"content":"\nReact Hooks have been on everyone's mind for a while now, and now that the hype has died down, I thought it would be nice to write a short introduction on them and go through concrete use-cases.\n\nReact Hooks have been introduced with React version 16.8, they allow us to use features that were once reserved to class components (such as internal state, lifecycle hooks etc.) in functional components.\n\nThis is great, as writing functional components is often preferred by the community as they offer advantages, namely: code that is easier to read and maintain, easier to test and often following better practices. For example, it's easier to create presentational, container and business logic **functional** components than it is using a class-based components.\n\n**Today, we'll only cover two of the most used hooks: `useState` and `useEffect`.**\n\n> Make sure you have a grasp of React's fundamentals to take full advantage of this lesson, especially the concept of internal state and lifecycle hooks.\n\nTo follow along, feel free to clone the following [repository](https://github.com/christopherkade/hooks-example) where we'll transform class components into functional components using these two hooks. These components can be found under `/components/ExampleUS` and `/components/ExampleUE`.\n\n<br>\n<br>\n\n## useState\n\nAlright, we have the following class-based component:\n\n```javascript\nclass ExampleUS extends React.Component {\n  state = {\n    value: \"\",\n  };\n\n  onChange = (event) => {\n    this.setState({\n      value: event.target.value,\n    });\n  };\n\n  render() {\n    return (\n      <article>\n        <h1>useState example</h1>\n\n        <input type=\"text\" value={this.state.value} onChange={this.onChange} />\n\n        <p>Value: {this.state.value}</p>\n      </article>\n    );\n  }\n}\n```\n\nAll it does is allow the user to input something, which is saved in the components internal state and displayed bellow, like so:\n\n<div style=\"display: flex; align-items: center; justify-content: center\">\n<img width=\"50%\" alt=\"render of the component mentioned\" src=\"https://user-images.githubusercontent.com/15229355/57177519-cb69bc00-6e64-11e9-9871-5cf31f4c874e.png\">\n</div>\n\nThis component requires an **internal state**, so using a class-based approach made sense before 16.8, but the `useState` hook will allow us to transform it into its functional counterpart.\n\n<br>\n\n### useState syntax\n\nThe `useState` syntax is very easy to grasp:\n\n```js\nconst [value, setValue] = useState(\"\");\n```\n\nWhere `value` is the variable to which we will bind the state, `setState` is the method to be called to update it and the parameter passed to `useState` is the state's default value. Pretty easy, right?\n\n<br>\n\n### Transforming the component\n\nGoing from a class component to a functional one will take 2 easy steps:\n\n1. First, we change the declaration of the component into a functional one\n\n```js\n// Changed the declaration of the component\nconst ExampleUS = () => {\n  state = {\n    value: \"\",\n  };\n\n  // onChange is now assigned to a constant variable\n  const onChange = (event) => {\n    this.setState({\n      value: event.target.value,\n    });\n  };\n\n  // Removed the render method,\n  // Functional components directly return the JSX to be rendered\n  return (\n    <article>\n      <h1>useState example</h1>\n      <input type=\"text\" value={this.state.value} onChange={this.onChange} />\n      <p>Value: {this.state.value}</p>\n    </article>\n  );\n};\n```\n\n2. Let's now remove all traces of the class' context (this) and state\n\n```js\nconst ExampleUS = () => {\n  // Removed the state declaration\n\n  // Removed the call to this.setState()\n  const onChange = (event) => {};\n\n  // Removed all calls to the context\n  return (\n    <article>\n      <h1>useState example</h1>\n      <input type=\"text\" onChange={onChange} />\n      <p>Value:</p>\n    </article>\n  );\n};\n```\n\n<br>\n\n### The final result\n\nAlright, we can now use `useState` with the syntax mentioned before to create an internal state.\n\nHere's what the final component looks like (don't forget to import the hook):\n\n```js\nimport React, { useState } from \"react\";\n\nconst ExampleUS = () => {\n  // We declare the state and the method to update it\n  const [value, setValue] = useState(\"\");\n\n  // On input, call setValue with the new state value\n  const onChange = (event) => {\n    setValue(event.target.value);\n  };\n\n  // Bind the input to the state value and display it\n  return (\n    <article>\n      <h1>useState example</h1>\n      <input type=\"text\" value={value} onChange={onChange} />\n      <p>Value: {value}</p>\n    </article>\n  );\n};\n```\n\n<br>\n<br>\n\n## useEffect\n\nFor this example, we have the following component:\n\n```js\nclass ExampleUE extends React.Component {\n  state = {\n    url: \"\",\n  };\n\n  /**\n   * Fetch a random dog photo and save its URL in our state\n   */\n  componentDidMount() {\n    fetch(\"https://dog.ceo/api/breeds/image/random\")\n      .then((res) => res.json())\n      .then((data) =>\n        this.setState({\n          url: data.message,\n        })\n      );\n  }\n\n  render() {\n    return (\n      <article>\n        <h1>useEffect example</h1>\n        <img src={this.state.url} alt=\"dog picture\" />\n      </article>\n    );\n  }\n}\n```\n\nWhere, on mount, we fetch a picture, save it in the internal state and display it, it looks something like this:\n\n<div style=\"display: flex; align-items: center; justify-content: center\">\n<img width=\"50%\" alt=\"render of the component mentioned\" src=\"https://user-images.githubusercontent.com/15229355/57177873-0110a400-6e69-11e9-820e-727f47c5192d.png\">\n</div>\n\nThe focal point being the lifecycle hook `componentDidMount` that is called whenever the component is mounted (meaning whenever it is inserted into the DOM tree). We will use the `useEffect` hook to do the exact same thing but in a functional component.\n\n<br>\n\n### useEffect syntax\n\nOnce again, this hook's syntax is easy to understand and use:\n\n```js\nuseEffect(() => {\n  // ...\n});\n```\n\nIt takes as its first parameter a callback that will be triggered **each time the component is rendered**.\n\nBut in our case, we only wish to trigger it once, when the component is mounted, right?  \nTo do so, we can pass `useEffect` a second parameter, an array of variables that will trigger the callback only when they are modified (instead of triggering it at every render of the component). We can also pass an empty array (`[]`) to tell the callback to be triggered only on mount and dismount of the component, making it look like so:\n\n```js\nuseEffect(() => {\n  // ...\n}, []);\n```\n\n<br>\n\n### Transforming the component\n\nWe'll skip this part, as it doesn't change much from the previous iteration.\n\n<br>\n\n### The final result\n\n```js\n// Don't forget to import both hooks\nimport React, { useState, useEffect } from \"react\";\n\nconst ExampleUE = () => {\n  const [url, setUrl] = useState(\"\");\n\n  // On component mount, the callback is called\n  // Fetch retrieves a picture and saves it in our internal state\n  // The second parameter tells useEffect\n  // to only be triggered on mount and dismount\n  useEffect(() => {\n    fetch(\"https://dog.ceo/api/breeds/image/random\")\n      .then((res) => res.json())\n      .then((data) => setUrl(data.message));\n  }, []);\n\n  return (\n    <article>\n      <h1>useEffect example</h1>\n      <img src={url} alt=\"dog picture\" />\n    </article>\n  );\n};\n```\n\n<br>\n<br>\n\n## Wrapping up\n\nReact Hooks are a great addition to the library, they provide considerable advantages and make the developer experience much smoother.  \nOne important thing to note is that there are [many](https://reactjs.org/docs/hooks-reference.html) other hooks, some more used than others and I invite you to read up on the official documentation as it is very well produced.\n\nOther references include:\n\n- Robin Wieruch's [\"How to fetch data with React Hooks?\"](https://www.robinwieruch.de/react-hooks-fetch-data/)\n- Matthieu Lux's [\"React Hooks, my introduction\"](https://medium.zenika.com/react-hooks-my-introduction-81b15e6eff20)\n\nThank you for reading, if you've learned something feel free to follow me on Twitter [@christo_kade](https://twitter.com/christo_kade) as I'll share all my new blog posts about React, Vue and the JS ecosystem as a whole ❤️\n"},"__N_SSG":true}